define("discourse/plugins/chat/admin/components/admin-chat-incoming-webhooks-list",["exports","@glimmer/component","@glimmer/tracking","@ember/helper","@ember/object","@ember/routing","@ember/service","discourse/components/d-button","discourse/helpers/replace-emoji","discourse/lib/ajax","discourse/lib/ajax-error","discourse-i18n","discourse/plugins/chat/discourse/components/channel-title","@ember/component","@ember/template-factory"],(function(e,t,o,n,i,s,a,c,l,r,d,u,h,m,p){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class b extends t.default{static#e=(()=>dt7948.g(this.prototype,"dialog",[a.service]))()
#t=(()=>{dt7948.i(this,"dialog")})()
static#o=(()=>dt7948.g(this.prototype,"loading",[o.tracked],(function(){return!1})))()
#n=(()=>{dt7948.i(this,"loading")})()
get sortedWebhooks(){return this.args.webhooks?.sortBy("updated_at").reverse()||[]}destroyWebhook(e){this.dialog.deleteConfirm({message:(0,u.i18n)("chat.incoming_webhooks.confirm_destroy"),didConfirm:async()=>{this.loading=!0
try{await(0,r.ajax)(`/admin/plugins/chat/hooks/${e.id}`,{type:"DELETE"}),this.args.webhooks.removeObject(e)}catch(t){(0,d.popupAjaxError)(t)}finally{this.loading=!1}}})}static#i=(()=>dt7948.n(this.prototype,"destroyWebhook",[i.action]))()
static#s=(()=>(0,m.setComponentTemplate)((0,p.createTemplateFactory)({id:"qxLyjsPe",block:'[[[1,"\\n    "],[10,"table"],[14,0,"d-admin-table"],[12],[1,"\\n      "],[10,"thead"],[12],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["chat.incoming_webhooks.name"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["chat.incoming_webhooks.emoji"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["chat.incoming_webhooks.username"],null]],[13],[1,"\\n        "],[10,"th"],[12],[1,[28,[32,0],["chat.incoming_webhooks.channel"],null]],[13],[1,"\\n        "],[10,"th"],[12],[13],[1,"\\n      "],[13],[1,"\\n\\n      "],[10,"tbody"],[12],[1,"\\n"],[42,[28,[31,1],[[28,[31,1],[[30,0,["sortedWebhooks"]]],null]],null],null,[[[1,"          "],[10,"tr"],[14,0,"d-admin-row__content incoming-chat-webhooks-row"],[15,"data-webhook-id",[30,1,["id"]]],[12],[1,"\\n            "],[10,"td"],[14,0,"d-admin-row__overview"],[12],[1,"\\n              "],[10,0],[14,0,"d-admin-row__overview-name"],[12],[1,"\\n                "],[1,[30,1,["name"]]],[1,"\\n              "],[13],[1,"\\n              "],[10,0],[14,0,"d-admin-row__overview-about"],[12],[1,"\\n                "],[1,[30,1,["description"]]],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n            "],[10,"td"],[14,0,"d-admin-row__detail"],[12],[1,"\\n              "],[10,0],[14,0,"d-admin-row__mobile-label"],[12],[1,"\\n                "],[1,[28,[32,0],["chat.incoming_webhooks.emoji"],null]],[1,"\\n              "],[13],[1,"\\n              "],[1,[28,[32,1],[[30,1,["emoji"]]],null]],[1,"\\n            "],[13],[1,"\\n            "],[10,"td"],[14,0,"d-admin-row__detail"],[12],[1,"\\n              "],[10,0],[14,0,"d-admin-row__mobile-label"],[12],[1,"\\n                "],[1,[28,[32,0],["chat.incoming_webhooks.username"],null]],[1,"\\n              "],[13],[1,"\\n              "],[1,[30,1,["username"]]],[1,"\\n            "],[13],[1,"\\n            "],[10,"td"],[14,0,"d-admin-row__detail"],[12],[1,"\\n              "],[10,0],[14,0,"d-admin-row__mobile-label"],[12],[1,"\\n                "],[1,[28,[32,0],["chat.incoming_webhooks.channel"],null]],[1,"\\n              "],[13],[1,"\\n              "],[8,[32,2],null,[["@channel"],[[30,1,["chat_channel"]]]],null],[1,"\\n            "],[13],[1,"\\n            "],[10,"td"],[14,0,"d-admin-row__controls incoming-chat-webhooks-row__controls"],[12],[1,"\\n              "],[10,0],[14,0,"d-admin-row__controls-options"],[12],[1,"\\n                "],[8,[32,3],[[24,0,"btn btn-default btn-small admin-chat-incoming-webhooks-edit"]],[["@route","@model"],["adminPlugins.show.discourse-chat-incoming-webhooks.edit",[30,1,["id"]]]],[["default"],[[[[1,[28,[32,0],["chat.incoming_webhooks.edit"],null]]],[]]]]],[1,"\\n\\n                "],[8,[32,4],[[24,0,"btn-danger btn-small admin-chat-incoming-webhooks-delete"]],[["@icon","@title","@action"],["trash-can","chat.incoming_webhooks.delete",[28,[32,5],[[30,0,["destroyWebhook"]],[30,1]],null]]],null],[1,"\\n              "],[13],[1,"\\n            "],[13],[1,"\\n          "],[13],[1,"\\n"]],[1]],null],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],["webhook"],false,["each","-track-array"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/chat/admin/components/admin-chat-incoming-webhooks-list.js",scope:()=>[u.i18n,l.default,h.default,s.LinkTo,c.default,n.fn],isStrictMode:!0}),this))()}e.default=b})),define("discourse/plugins/chat/admin/components/chat-admin-plugin-actions",["exports","@glimmer/component","@ember/object","@ember/service","discourse/lib/ajax-error","discourse-i18n","@ember/component","@ember/template-factory"],(function(e,t,o,n,i,s,a,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class l extends t.default{static#e=(()=>dt7948.g(this.prototype,"dialog",[n.service]))()
#t=(()=>{dt7948.i(this,"dialog")})()
static#o=(()=>dt7948.g(this.prototype,"chatAdminApi",[n.service]))()
#a=(()=>{dt7948.i(this,"chatAdminApi")})()
confirmExportMessages(){return this.dialog.confirm({message:(0,s.i18n)("chat.admin.export_messages.confirm_export"),didConfirm:()=>this.exportMessages()})}static#i=(()=>dt7948.n(this.prototype,"confirmExportMessages",[o.action]))()
async exportMessages(){try{await this.chatAdminApi.exportMessages(),this.dialog.alert((0,s.i18n)("chat.admin.export_messages.export_has_started"))}catch(e){(0,i.popupAjaxError)(e)}}static#s=(()=>dt7948.n(this.prototype,"exportMessages",[o.action]))()
static#c=(()=>(0,a.setComponentTemplate)((0,c.createTemplateFactory)({id:"Tq21meGp",block:'[[[1,"\\n    "],[8,[30,1,["Primary"]],[[24,0,"admin-chat-export"]],[["@label","@title","@action","@icon"],["chat.admin.export_messages.create_export","chat.admin.export_messages.create_export",[30,0,["confirmExportMessages"]],"right-from-bracket"]],null],[1,"\\n  "]],["@actions"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/chat/admin/components/chat-admin-plugin-actions.js",isStrictMode:!0}),this))()}e.default=l})),define("discourse/plugins/chat/admin/components/chat-incoming-webhook-edit-form",["exports","@glimmer/component","@ember/helper","@ember/object","@ember/service","truth-helpers","discourse/components/d-button","discourse/components/emoji-picker","discourse/components/form","discourse/helpers/replace-emoji","discourse/lib/ajax","discourse/lib/ajax-error","discourse-i18n","discourse/plugins/chat/discourse/components/chat-channel-chooser","@ember/component","@ember/template-factory"],(function(e,t,o,n,i,s,a,c,l,r,d,u,h,m,p,b){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class g extends t.default{static#e=(()=>dt7948.g(this.prototype,"toasts",[i.service]))()
#l=(()=>{dt7948.i(this,"toasts")})()
static#o=(()=>dt7948.g(this.prototype,"router",[i.service]))()
#r=(()=>{dt7948.i(this,"router")})()
get formData(){return{name:this.args.webhook?.name,description:this.args.webhook?.description,username:this.args.webhook?.username,chat_channel_id:this.args.webhook?.chat_channel.id,emoji:this.args.webhook?.emoji}}emojiSelected(e,t){e("emoji",`:${t}:`)}static#i=(()=>dt7948.n(this.prototype,"emojiSelected",[n.action]))()
resetEmoji(e){e("emoji",null)}static#s=(()=>dt7948.n(this.prototype,"resetEmoji",[n.action]))()
async save(e){try{if(this.args.webhook?.id)await(0,d.ajax)(`/admin/plugins/chat/hooks/${this.args.webhook.id}`,{data:e,type:"PUT"}),this.toasts.success({duration:3e3,data:{message:(0,h.i18n)("chat.incoming_webhooks.saved")}})
else{const t=await(0,d.ajax)("/admin/plugins/chat/hooks",{data:e,type:"POST"})
this.toasts.success({duration:3e3,data:{message:(0,h.i18n)("chat.incoming_webhooks.created")}}),this.router.transitionTo("adminPlugins.show.discourse-chat-incoming-webhooks.edit",t).then((()=>{this.router.refresh()}))}}catch(t){(0,u.popupAjaxError)(t)}}static#c=(()=>dt7948.n(this.prototype,"save",[n.action]))()
static#d=(()=>(0,p.setComponentTemplate)((0,b.createTemplateFactory)({id:"A1ECGHIN",block:'[[[1,"\\n    "],[8,[32,0],null,[["@data","@onSubmit"],[[30,0,["formData"]],[30,0,["save"]]]],[["default"],[[[[1,"\\n      "],[8,[30,1,["Field"]],null,[["@name","@title","@validation"],["name",[28,[32,1],["chat.incoming_webhooks.name"],null],"required"]],[["default"],[[[[1,"\\n        "],[8,[30,2,["Input"]],null,null,null],[1,"\\n      "]],[2]]]]],[1,"\\n\\n      "],[8,[30,1,["Field"]],null,[["@name","@title"],["description",[28,[32,1],["chat.incoming_webhooks.description"],null]]],[["default"],[[[[1,"\\n        "],[8,[30,3,["Textarea"]],null,null,null],[1,"\\n      "]],[3]]]]],[1,"\\n\\n      "],[8,[30,1,["Field"]],null,[["@name","@title","@description"],["username",[28,[32,1],["chat.incoming_webhooks.username"],null],[28,[32,1],["chat.incoming_webhooks.username_instructions"],null]]],[["default"],[[[[1,"\\n        "],[8,[30,4,["Input"]],null,null,null],[1,"\\n      "]],[4]]]]],[1,"\\n\\n      "],[8,[30,1,["Field"]],null,[["@name","@title","@validation"],["chat_channel_id",[28,[32,1],["chat.incoming_webhooks.post_to"],null],"required"]],[["default"],[[[[1,"\\n        "],[8,[30,5,["Custom"]],null,null,[["default"],[[[[1,"\\n          "],[8,[32,2],null,[["@content","@value","@onChange"],[[30,6],[30,5,["value"]],[30,5,["set"]]]],null],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[5]]]]],[1,"\\n\\n      "],[8,[30,1,["Field"]],null,[["@name","@title","@description","@size"],["emoji",[28,[32,1],["chat.incoming_webhooks.emoji"],null],[28,[32,1],["chat.incoming_webhooks.emoji_instructions"],null],"large"]],[["default"],[[[[1,"\\n        "],[8,[30,7,["Custom"]],null,null,[["default"],[[[[1,"\\n"],[41,[30,7,["value"]],[[[1,"            "],[1,[28,[32,1],["chat.incoming_webhooks.current_emoji"],null]],[1,"\\n\\n            "],[10,1],[14,0,"incoming-chat-webhooks-current-emoji"],[12],[1,"\\n              "],[1,[28,[32,3],[[30,7,["value"]]],null]],[1,"\\n            "],[13],[1,"\\n"]],[]],null],[1,"\\n          "],[8,[30,1,["Row"]],null,null,[["default"],[[[[1,"\\n            "],[8,[30,8,["Col"]],null,[["@size"],[2]],[["default"],[[[[1,"\\n              "],[8,[32,4],null,[["@didSelectEmoji"],[[28,[32,5],[[30,0,["emojiSelected"]],[30,1,["set"]]],null]]],null],[1,"\\n            "]],[]]]]],[1,"\\n            "],[8,[30,8,["Col"]],null,[["@size"],[6]],[["default"],[[[[1,"\\n              "],[8,[32,6],[[24,0,"admin-chat-webhooks-clear-emoji"]],[["@label","@action","@disabled"],["chat.incoming_webhooks.reset_emoji",[28,[32,5],[[30,0,["resetEmoji"]],[30,1,["set"]]],null],[28,[32,7],[[30,7,["value"]]],null]]],null],[1,"\\n            "]],[]]]]],[1,"\\n          "]],[8]]]]],[1,"\\n        "]],[]]]]],[1,"\\n      "]],[7]]]]],[1,"\\n\\n"],[41,[30,9,["url"]],[[[1,"        "],[8,[30,1,["Container"]],null,[["@name","@title","@subtitle"],["url",[28,[32,1],["chat.incoming_webhooks.url"],null],[28,[32,1],["chat.incoming_webhooks.url_instructions"],null]]],[["default"],[[[[1,"\\n          "],[10,"code"],[12],[1,[30,9,["url"]]],[13],[1,"\\n        "]],[]]]]],[1,"\\n"]],[]],null],[1,"\\n      "],[8,[30,1,["Submit"]],null,null,null],[1,"\\n    "]],[1]]]]],[1,"\\n  "]],["form","field","field","field","field","@chatChannels","field","row","@webhook"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/chat/admin/components/chat-incoming-webhook-edit-form.js",scope:()=>[l.default,h.i18n,m.default,r.default,c.default,o.fn,a.default,s.not],isStrictMode:!0}),this))()}e.default=g})),define("discourse/plugins/chat/discourse/routes/admin-plugins-show-discourse-chat-incoming-webhooks-edit",["exports","@ember/object","@ember/service","discourse/lib/ajax","discourse/lib/ajax-error","discourse/routes/discourse","discourse/plugins/chat/discourse/models/chat-channel"],(function(e,t,o,n,i,s,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class c extends s.default{static#e=(()=>dt7948.g(this.prototype,"currentUser",[o.service]))()
#u=(()=>{dt7948.i(this,"currentUser")})()
async model(e){if(!this.currentUser?.admin)return{model:null}
try{const o=await(0,n.ajax)(`/admin/plugins/chat/hooks/${e.id}/edit.json`)
return o.webhook=t.default.create(o.webhook),o.webhook.chat_channel=a.default.create(o.webhook.chat_channel),o.chat_channels=o.chat_channels.map((e=>a.default.create(e))),o}catch(o){(0,i.popupAjaxError)(o)}}}e.default=c})),define("discourse/plugins/chat/discourse/routes/admin-plugins-show-discourse-chat-incoming-webhooks-index",["exports","@ember/object","@ember/service","discourse/lib/ajax","discourse/lib/ajax-error","discourse/routes/discourse","discourse-i18n","discourse/plugins/chat/discourse/models/chat-channel"],(function(e,t,o,n,i,s,a,c){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class l extends s.default{static#e=(()=>dt7948.g(this.prototype,"currentUser",[o.service]))()
#u=(()=>{dt7948.i(this,"currentUser")})()
async model(){if(!this.currentUser?.admin)return{model:null}
try{const e=await(0,n.ajax)("/admin/plugins/chat/hooks.json")
return e.chat_channels=e.chat_channels.map((e=>c.default.create(e))),e.incoming_chat_webhooks=e.incoming_chat_webhooks.map((e=>(e.chat_channel=c.default.create(e.chat_channel),t.default.create(e)))),e}catch(e){(0,i.popupAjaxError)(e)}}titleToken(){return(0,a.i18n)("chat.incoming_webhooks.title")}}e.default=l})),define("discourse/plugins/chat/discourse/routes/admin-plugins-show-discourse-chat-incoming-webhooks-new",["exports","@ember/object","@ember/service","discourse/lib/ajax","discourse/lib/ajax-error","discourse/routes/discourse","discourse/plugins/chat/discourse/models/chat-channel"],(function(e,t,o,n,i,s,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
class c extends s.default{static#e=(()=>dt7948.g(this.prototype,"adminPluginNavManager",[o.service]))()
#h=(()=>{dt7948.i(this,"adminPluginNavManager")})()
static#o=(()=>dt7948.g(this.prototype,"currentUser",[o.service]))()
#u=(()=>{dt7948.i(this,"currentUser")})()
async model(){if(!this.currentUser?.admin)return{model:null}
try{const e=await(0,n.ajax)("/admin/plugins/chat/hooks/new.json")
return e.webhook=t.default.create(e.webhook),e.webhook.chat_channel=a.default.create(e.webhook.chat_channel),e.chat_channels=e.chat_channels.map((e=>a.default.create(e))),e}catch(e){(0,i.popupAjaxError)(e)}}}e.default=c})),define("discourse/plugins/chat/discourse/templates/admin-plugins/show/discourse-chat-incoming-webhooks/edit",["exports","ember-route-template","truth-helpers","discourse/components/back-button","discourse/components/conditional-loading-spinner","discourse/plugins/chat/admin/components/chat-incoming-webhook-edit-form","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,o,n,i,s,a,c,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.default)((0,a.setComponentTemplate)((0,c.createTemplateFactory)({id:"bha8H1u9",block:'[[[1,"\\n    "],[10,0],[14,0,"admin-detail discourse-chat-incoming-webhooks"],[12],[1,"\\n      "],[8,[32,0],[[24,0,"incoming-chat-webhooks-back"]],[["@label","@route"],["chat.incoming_webhooks.back","adminPlugins.show.discourse-chat-incoming-webhooks.index"]],null],[1,"\\n\\n      "],[8,[32,1],null,[["@condition"],[[28,[32,2],[[30,1,["model","webhook"]]],null]]],[["default"],[[[[1,"\\n        "],[8,[32,3],null,[["@webhook","@chatChannels"],[[30,1,["model","webhook"]],[30,1,["model","chat_channels"]]]],null],[1,"\\n      "]],[]]]]],[1,"\\n    "],[13],[1,"\\n  "]],["@controller"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/chat/discourse/templates/admin-plugins/show/discourse-chat-incoming-webhooks/edit.js",scope:()=>[n.default,i.default,o.not,s.default],isStrictMode:!0}),(0,l.default)(void 0,void 0)))})),define("discourse/plugins/chat/discourse/templates/admin-plugins/show/discourse-chat-incoming-webhooks/index",["exports","ember-route-template","discourse/components/d-breadcrumbs-item","discourse/components/d-page-subheader","discourse-i18n","discourse/plugins/chat/admin/components/admin-chat-incoming-webhooks-list","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,o,n,i,s,a,c,l){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.default)((0,a.setComponentTemplate)((0,c.createTemplateFactory)({id:"arlh1F0w",block:'[[[1,"\\n    "],[8,[32,0],null,[["@path","@label"],["/admin/plugins/chat/hooks",[28,[32,1],["chat.incoming_webhooks.title"],null]]],null],[1,"\\n\\n    "],[10,0],[14,0,"discourse-chat-incoming-webhooks admin-detail"],[12],[1,"\\n      "],[8,[32,2],null,[["@titleLabel","@descriptionLabel"],[[28,[32,1],["chat.incoming_webhooks.title"],null],[28,[32,1],["chat.incoming_webhooks.instructions"],null]]],[["actions"],[[[[1,"\\n          "],[8,[30,1,["Primary"]],[[24,0,"admin-incoming-webhooks-new"]],[["@label","@title","@route","@routeModels","@icon"],["chat.incoming_webhooks.new","chat.incoming_webhooks.new","adminPlugins.show.discourse-chat-incoming-webhooks.new","chat","plus"]],null],[1,"\\n        "]],[1]]]]],[1,"\\n\\n      "],[10,0],[14,0,"incoming-chat-webhooks"],[12],[1,"\\n"],[41,[30,2,["model","incoming_chat_webhooks"]],[[[1,"          "],[8,[32,3],null,[["@webhooks"],[[30,2,["model","incoming_chat_webhooks"]]]],null],[1,"\\n"]],[]],[[[1,"          "],[1,[28,[32,1],["chat.incoming_webhooks.none"],null]],[1,"\\n"]],[]]],[1,"      "],[13],[1,"\\n    "],[13],[1,"\\n  "]],["actions","@controller"],false,["if"]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/chat/discourse/templates/admin-plugins/show/discourse-chat-incoming-webhooks/index.js",scope:()=>[o.default,i.i18n,n.default,s.default],isStrictMode:!0}),(0,l.default)(void 0,void 0)))})),define("discourse/plugins/chat/discourse/templates/admin-plugins/show/discourse-chat-incoming-webhooks/new",["exports","ember-route-template","discourse/components/back-button","discourse/plugins/chat/admin/components/chat-incoming-webhook-edit-form","@ember/component","@ember/template-factory","@ember/component/template-only"],(function(e,t,o,n,i,s,a){"use strict"
Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0
e.default=(0,t.default)((0,i.setComponentTemplate)((0,s.createTemplateFactory)({id:"1PipV2Rf",block:'[[[1,"\\n    "],[10,0],[14,0,"admin-detail discourse-chat-incoming-webhooks"],[12],[1,"\\n      "],[8,[32,0],[[24,0,"incoming-chat-webhooks-back"]],[["@label","@route"],["chat.incoming_webhooks.back","adminPlugins.show.discourse-chat-incoming-webhooks.index"]],null],[1,"\\n\\n      "],[8,[32,1],null,[["@chatChannels"],[[30,1,["model","chat_channels"]]]],null],[1,"\\n    "],[13],[1,"\\n  "]],["@controller"],false,[]]',moduleName:"/var/www/discourse/app/assets/javascripts/discourse/discourse/plugins/chat/discourse/templates/admin-plugins/show/discourse-chat-incoming-webhooks/new.js",scope:()=>[o.default,n.default],isStrictMode:!0}),(0,a.default)(void 0,void 0)))}))

//# sourceMappingURL=chat_admin-9ae4df70.map